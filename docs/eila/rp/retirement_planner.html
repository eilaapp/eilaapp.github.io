<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EILA Retirement Planner</title>
  <link rel="icon" type="image/x-icon" href="../images/logo_transparent.svg" alt="EILA">
  <link href="../css/tutorial_css.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css">
</head>

<body class="light-mode">
  <header class="main-header">
    <div class="header-content">
      <div class="header-left">
        <button class="mobile-sidebar-toggle" id="mobile-sidebar-toggle">
          <i class="fas fa-bars"></i>
        </button>

        <div class="logo-container">
          <a href="../../index.html">
            <img class="logo" src="../images/logo_transparent.svg" alt="Home">
          </a>
          <div class="header-title">Retirement Planner</div>
        </div>
      </div>

      <button class="header-theme-toggle" id="theme-toggle">
        <i class="fas fa-moon"></i>
      </button>
    </div>
  </header>

  <!-- Sidebar Overlay for Mobile -->
  <div class="sidebar-overlay" id="sidebar-overlay"></div>

  <div class="tutorial-wrapper">
    <!-- Sidebar -->
    <aside class="tutorial-sidebar" id="tutorial-sidebar">
      <nav class="sidebar-nav">
        <a href="#overview" class="active"><i class="fas fa-home"></i> Overview</a>
        <a href="#chart"><i class="fas fa-chart-line"></i> Chart</a>
        <a href="#summary"><i class="fas fa-file-alt"></i> Summary</a>
        <a href="#plan-setup"><i class="fas fa-cog"></i> Plan Setup</a>
        <a href="#retirement-setup"><i class="fas fa-umbrella-beach"></i> Retirement Setup</a>
        <a href="#projections-table"><i class="fas fa-table"></i> Projections Table</a>
        <a href="#how-to-use"><i class="fas fa-graduation-cap"></i> How to Use</a>
        <a href="#disclaimer"><i class="fas fa-exclamation-triangle"></i> Disclaimer</a>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="tutorial-content">
      <!-- Hero Section -->
      <section class="tutorial-hero" id="overview">
        <h1>Retirement Planner</h1>
        <p class="tutorial-intro">
          The Retirement Planner helps you:
        </p>

        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon"><i class="fas fa-calculator"></i></div>
            <h3>Plan Your Savings</h3>
            <p>Plan how much money you may have when you retire</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon"><i class="fas fa-chart-area"></i></div>
            <h3>Visualize Growth</h3>
            <p>See how your savings could grow over time</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon"><i class="fas fa-bullseye"></i></div>
            <h3>Track Progress</h3>
            <p>Understand whether your current path is on track</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon"><i class="fas fa-balance-scale"></i></div>
            <h3>Compare Reality</h3>
            <p>Compare your plan with what is actually happening in real life</p>
          </div>
        </div>

        <div class="tutorial-image-container">
          <img src="images/rp_plan_01.png" alt="Retirement Planner Main Screen" class="tutorial-image">
        </div>

        <p>The planner shows <strong>three possible outcomes</strong>, these outcomes help you prepare for uncertainty:
        </p>
        <ul class="icon-list">
          <li><i class="fas fa-chart-line"></i> <strong>Normal</strong> what is most likely to happen</li>
          <li><i class="fas fa-arrow-up"></i> <strong>Best case</strong> things go better than expected</li>
          <li><i class="fas fa-arrow-down"></i> <strong>Worst case</strong> things don't go as well as expected</li>
        </ul>

        <p>The screen is divided into these sections:</p>
        <div class="button-grid">
          <a href="#chart" class="bs-button">Chart</a>
          <a href="#summary" class="bs-button">Summary</a>
          <a href="#plan-setup" class="bs-button">Plan Setup</a>
          <a href="#retirement-setup" class="bs-button">Retirement Setup</a>
          <a href="#projections-table" class="bs-button">Projections</a>
        </div>
      </section>

      <!-- Chart Section -->
      <section class="section" id="chart">
        <h2>Chart</h2>
        <p>The chart is a visual timeline of your retirement journey. It shows how your total savings balance may change
          from start through retirement.</p>

        <div class="tutorial-image-container">
          <img src="images/rp_chart_01.png" alt="Retirement Planner Chart" class="tutorial-image">
        </div>

        <h3>Chart shows Two Types of Lines</h3>
        <div class="card-grid">
          <div class="bs-card">
            <h4>Plan</h4>
            <p>Shows what <em>should</em> happen if everything goes according to the plan you set up.</p>
            <p>Based only on the values you enter (expected income, savings, retirement age, etc.).</p>
            <p><span class="small-changes-compound-message"></span></p>
          </div>
          <div class="bs-card">
            <h4>Reality</h4>
            <p>Shows what is <em>actually</em> happening based on your real account balances and transactions so far.
            </p>
            <p>Uses real data up to current year, then projects the future using your plan settings.</p>
            <p><span class="enough-data-message"></span></p>
          </div>
        </div>

        <h3>Scenarios</h3>
        <p>Each line can include:</p>
        <ul class="icon-list">
          <li><i class="fas fa-chart-line"></i> <strong>Normal</strong> projection line between shaded areas</li>
          <li><i class="fas fa-arrow-up"></i> <strong>Best case</strong> projection, shaded area above the normal line
          </li>
          <li><i class="fas fa-arrow-down"></i> <strong>Worst case</strong> projection, shaded area below the normal
            line</li>
        </ul>
        <p>The shaded area between best and worst shows how much outcomes can vary.</p>

        <h3>Uncertainty Bands Toggle</h3>
        <ul class="simple-list">
          <li><i class="fas fa-toggle-on"></i><strong>On</strong>Shows best and worst case ranges</li>
          <li><i class="fas fa-toggle-off"></i><strong>Off</strong>Shows only the normal projection</li>
        </ul>

        <div class="tutorial-image-container">
          <img src="images/rp_chart_wo_uncertainty_01.png" alt="Uncertainty Bands Toggle" class="tutorial-image">
        </div>

        <p><strong>Include Assets</strong><br>
          Choose whether to include assets (such as property or investments) when calculating your total real balance.
        </p>

        <h3>Full Timeline Toggle</h3>
        <ul class="simple-list">
          <li><i class="fas fa-toggle-on"></i><strong>On</strong>Shows the full timeline until the end of retirement
          </li>
          <li><i class="fas fa-toggle-off"></i><strong>Off</strong>Stops the chart when your balance reaches zero (or
            the lowest point before retirement)</li>
        </ul>

        <div class="tutorial-image-container">
          <img src="images/rp_chart_full_timeline_01.png" alt="Full Timeline Toggle" class="tutorial-image">
        </div>
      </section>

      <!-- Summary Section -->
      <section class="section" id="summary">
        <h2>Summary</h2>
        <p>The summary explains the outcome of your plans in plain language.</p>
        <p>You will see two summaries:</p>

        <div class="card-grid">
          <div class="bs-card">
            <h4>Planned Outcome</h4>
            <p>How your retirement plan performs from start to end purely based on plan setup, without including real
              life data.</p>
          </div>
          <div class="bs-card">
            <h4>Real-Life Outcome</h4>
            <p>Uses your real historical data up to today and projects future outcomes based on actual progress.</p>
          </div>
        </div>

        <p><strong>Real-Life Outcome details:</strong></p>
        <ul class="simple-list">
          <li><i class="fas fa-circle"></i> Uses your real historical data (transactions, balances, income, expenses,
            assets, liabilities)</li>
          <li><i class="fas fa-circle"></i> Projects your future retirement outcome based on how you are actually
            progressing</li>
          <li><i class="fas fa-circle"></i> Shows whether your real-life trajectory is likely to do better or worse than
            the plan</li>
        </ul>

        <p>Each summary is shown for:</p>
        <ul class="icon-list">
          <li><i class="fas fa-chart-line"></i><strong>Normal</strong> scenario</li>
          <li><i class="fas fa-arrow-up"></i><strong>Best case</strong> scenario</li>
          <li><i class="fas fa-arrow-down"></i><strong>Worst case</strong> scenario</li>
        </ul>

        <div class="tutorial-image-container">
          <img src="images/rp_plan_summary_01.png" alt="Retirement Planner Summary" class="tutorial-image">
        </div>

        <p>The messages tell you whether:</p>
        <ul class="icon-list">
          <li><i class="fas fa-check-circle"></i> Your savings last through retirement</li>
          <li><i class="fas fa-plus-circle"></i> You end with extra money</li>
          <li><i class="fas fa-exclamation-circle"></i> You may run out of money and at what age</li>
        </ul>
      </section>

      <!-- Plan Setup Section -->
      <section class="section" id="plan-setup">
        <h2>Plan Setup</h2>
        <p>This section is where you enter details about your working years, savings behavior, and your retirement plan
          assumptions.</p>

        <div class="tutorial-image-container">
          <img src="images/rp_plan_setup_01.png" alt="Retirement Plan Setup" class="tutorial-image">
        </div>

        <ul class="icon-list">
          <li>
            <i class="fas fa-birthday-cake"></i>
            <div>
              <strong>Date of Birth</strong><br>
              <p>Your birth date. This is used to calculate your age now and in future years.</p>
            </div>
          </li>
          <li>
            <i class="fas fa-calendar-plus"></i>
            <div>
              <strong>Plan Start Date</strong><br>
              <p>The date from which your retirement plan starts. This is usually today. Starting earlier gives your
                savings more time to grow.</p>
            </div>
          </li>
          <li>
            <i class="fas fa-piggy-bank"></i>
            <div>
              <strong>Savings at Plan Start</strong><br>
              <p>Your total savings balance at the start of the plan. This is the amount you already have saved for
                retirement.</p>
            </div>
          </li>
          <li>
            <i class="fas fa-money-bill-wave"></i>
            <div>
              <strong>Income (Yearly)</strong><br>
              <p>Your current yearly income before retirement.</p>
            </div>
          </li>
          <li>
            <i class="fas fa-chart-line"></i>
            <div>
              <strong>Income Increase (Yearly)</strong><br>
              <p>The percentage by which your income is expected to grow each year (for example, due to raises or
                promotions).</p>
              <div class="callout">
                <p><strong>Uncertainty:</strong> You can set a range (e.g., Â±1%) to see how faster or slower income
                  growth affects the plan.</p>
              </div>
            </div>
          </li>
          <li>
            <i class="fas fa-percentage"></i>
            <div>
              <strong>Savings Rate (Yearly)</strong><br>
              <p>The percentage of your annual income you are planing to save each year.</p>
              <div class="callout">
                <p><strong>Uncertainty:</strong> Adjust this to see what happens if you save slightly more or less than
                  planned.</p>
              </div>
            </div>
          </li>
          <li>
            <i class="fas fa-arrow-up"></i>
            <div>
              <strong>Savings Increase (Yearly)</strong><br>
              <p>How much your savings rate increases each year as your ability to save improves over time.</p>
              <div class="callout">
                <p><strong>Uncertainty:</strong> Adjust this to see what happens if your savings increase slightly more
                  or less than planned.</p>
              </div>
            </div>
          </li>
          <li>
            <i class="fas fa-coins"></i>
            <div>
              <strong>Savings Profit (Yearly)</strong><br>
              <p>The average yearly return earned on your savings from investments. This assumes <b>all</b> your saved
                money is invested and earning returns. If you don't expect investment growth, this can be set to zero.
                Applied to the balance at the start of each year. Applies during both pre-retirement and post-retirement
                years.</p>
              <div class="callout">
                <p><strong>Uncertainty:</strong> Markets are volatile. Use this setting to simulate higher or lower
                  returns.</p>
              </div>
            </div>
          </li>
          <li>
            <i class="fas fa-chart-bar"></i>
            <div>
              <strong>Inflation (Yearly)</strong><br>
              <p>The expected yearly increase in living costs or inflation rate in the country/region where you live.
                Used in post-retirement to inflate retirement expenses each year. Higher inflation is the "Worst Case"
                here because it means your money buys less over time.</p>
              <div class="callout">
                <p><strong>Uncertainty:</strong> Adjust this to see what happens if inflation is slightly more or less
                  than planned.</p>
              </div>
            </div>
          </li>
        </ul>
      </section>

      <!-- Retirement Setup Section -->
      <section class="section" id="retirement-setup">
        <h2>Retirement Setup</h2>
        <p>These settings define your retirement lifestyle and income.</p>

        <div class="tutorial-image-container">
          <img src="images/rp_plan_setup_02.png" alt="Retirement Setup" class="tutorial-image">
        </div>

        <ul class="icon-list">
          <li>
            <i class="fas fa-user-clock"></i>
            <div>
              <strong>Retirement Age</strong><br>
              <p>The age at which you plan to stop working.</p>
            </div>
          </li>
          <li>
            <i class="fas fa-calendar-alt"></i>
            <div>
              <strong>Retirement Duration (Years)</strong><br>
              <p>How many years your savings should last after you retire. Increasing this value extends the projection
                period, requiring more savings to sustain a longer retirement.</p>
            </div>
          </li>
          <li>
            <i class="fas fa-shopping-cart"></i>
            <div>
              <strong>Retirement Expenses (Yearly)</strong><br>
              <p>Your expected yearly living expenses during retirement. This amount is assumed to be for the plan start
                date and will be adjusted for inflation in post-retirement years. These expenses increase over time due
                to inflation.</p>
            </div>
          </li>
          <li>
            <i class="fas fa-hand-holding-usd"></i>
            <div>
              <strong>Pension (Yearly)</strong><br>
              <p>Any yearly pension income you expect to receive after retirement. Begins at retirement age and
                continues each year thereafter. If you don't have a pension, this can be left as zero.</p>
              <div class="callout">
                <p><strong>Uncertainty:</strong> Possible variation in your starting pension amount (in %).</p>
              </div>
            </div>
          </li>
          <li>
            <i class="fas fa-arrow-up"></i>
            <div>
              <strong>Pension Increase (Yearly)</strong><br>
              <p>The expected yearly increase in your pension after retirement.</p>
              <div class="callout">
                <p><strong>Uncertainty:</strong> Use this to test scenarios where your pension increases slower or
                  faster than expected.</p>
              </div>
            </div>
          </li>
        </ul>
      </section>

      <!-- Projections Table Section -->
      <section class="section" id="projections-table">
        <h2>Projections Table</h2>
        <p>The projections table shows your retirement plan year by year.</p>
        <p>Each row represents one year of your life.</p>

        <div class="tutorial-image-container-sm">
          <img src="images/rp_table_01.png" alt="Year-by-Year Projections Table" class="tutorial-image">
        </div>

        <ul class="icon-list">
          <li>
            <i class="fas fa-wallet"></i>
            <div>
              <strong>Start Balance</strong><br>
              <p>Your total balance at the beginning of the year.</p>
            </div>
          </li>
          <li>
            <i class="fas fa-money-bill-wave"></i>
            <div>
              <strong>Income</strong><br>
              <p>Your earnings for that year before retirement. After retirement, this is zero.</p>
            </div>
          </li>
          <li>
            <i class="fas fa-piggy-bank"></i>
            <div>
              <strong>Savings</strong><br>
              <p>The amount added to your savings during the year. This stops after retirement.</p>
            </div>
          </li>
          <li>
            <i class="fas fa-chart-line"></i>
            <div>
              <strong>Savings Profit</strong><br>
              <p>The investment returns earned on your balance for that year, based on your savings profit setting.</p>
            </div>
          </li>
          <li>
            <i class="fas fa-shopping-cart"></i>
            <div>
              <strong>Retirement Expenses</strong><br>
              <p>Money spent during retirement. This is zero before retirement.</p>
            </div>
          </li>
          <li>
            <i class="fas fa-hand-holding-usd"></i>
            <div>
              <strong>Pension</strong><br>
              <p>Pension income received during retirement (active only after retirement).</p>
            </div>
          </li>
          <li>
            <i class="fas fa-wallet"></i>
            <div>
              <strong>End Balance</strong><br>
              <p>Your total balance at the end of the year after income, savings, investment growth, pension, and
                expenses. If the end balance becomes negative, it means your savings run out in that year.</p>
            </div>
          </li>
        </ul>
      </section>

      <!-- How to Use Section -->
      <section class="section" id="how-to-use">
        <h2>How to use this planner effectively</h2>
        <ul class="icon-list">
          <li><i class="fas fa-check-circle"></i> Start with realistic numbers</li>
          <li><i class="fas fa-sync-alt"></i> Review both Plan and Reality projections</li>
          <li><i class="fas fa-database"></i> <span class="enough-data-message"></span></li>
          <li><i class="fas fa-exclamation-triangle"></i> Pay attention to worst case scenarios</li>
          <li><i class="fas fa-wrench"></i> Adjust savings, expenses, or retirement age if needed</li>
        </ul>
      </section>

      <!-- Disclaimer Section -->
      <section class="section" id="disclaimer">
        <h2>Important Disclaimer</h2>
        <p>This Retirement Planner is a <strong>forecasting and educational tool only</strong>. It is not financial,
          investment, tax, or legal advice. The projections are estimates based on the information you provide and
          assumptions about future growth, inflation, and behavior.</p>
        <p>Actual results may vary significantly due to market conditions, life events, or incomplete data. Always
          consider consulting a qualified financial professional before making financial decisions.</p>
      </section>
    </main>
  </div>

  <!-- Go to Top Button -->
  <button class="go-to-top" id="go-to-top">
    <i class="fas fa-chevron-up"></i>
  </button>

  <script>
    const themeToggle = document.getElementById('theme-toggle');
    const themeIcon = themeToggle.querySelector('i');

    // Check for saved theme or system preference
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const savedTheme = localStorage.getItem('theme');

    if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
      document.body.classList.add('dark-mode');
      themeIcon.className = 'fas fa-sun';
    }

    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');

      if (document.body.classList.contains('dark-mode')) {
        localStorage.setItem('theme', 'dark');
        themeIcon.className = 'fas fa-sun';
      } else {
        localStorage.setItem('theme', 'light');
        themeIcon.className = 'fas fa-moon';
      }
    });

    // Mobile Sidebar Toggle
    const mobileSidebarToggle = document.getElementById('mobile-sidebar-toggle');
    const manualSidebar = document.getElementById('tutorial-sidebar');
    const sidebarOverlay = document.getElementById('sidebar-overlay');
    const sidebarLinks = document.querySelectorAll('.sidebar-nav a');

    function openSidebar() {
      manualSidebar.classList.add('active');
      sidebarOverlay.classList.add('active');
      // Prevent body scroll when sidebar is open
      document.body.style.overflow = 'hidden';
    }

    function closeSidebar() {
      manualSidebar.classList.remove('active');
      sidebarOverlay.classList.remove('active');
      // Re-enable body scroll when sidebar is closed
      document.body.style.overflow = '';
    }

    function toggleSidebar() {
      if (manualSidebar.classList.contains('active')) {
        closeSidebar();
      } else {
        openSidebar();
      }
    }

    mobileSidebarToggle.addEventListener('click', toggleSidebar);
    sidebarOverlay.addEventListener('click', closeSidebar);

    // Close sidebar when clicking on links (mobile)
    sidebarLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();

        if (window.innerWidth < 1024) {
          closeSidebar();
        }

        // Get the target section
        const targetId = link.getAttribute('href');
        if (targetId && targetId !== '#') {
          const targetElement = document.querySelector(targetId);
          if (targetElement) {
            window.scrollTo({
              top: targetElement.offsetTop,
              behavior: 'smooth'
            });
          }
        }

        // DO NOT update active link here - let IntersectionObserver handle it
      });
    });

    // Close sidebar when pressing Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && manualSidebar.classList.contains('active')) {
        closeSidebar();
      }
    });

    // Window resize handler
    let resizeTimeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(() => {
        if (window.innerWidth >= 1024) {
          closeSidebar();
        }
      }, 100);
    });

    const goToTopButton = document.getElementById('go-to-top');

    // Show/hide go to top button based on scroll position
    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) {
        goToTopButton.classList.add('visible');
      } else {
        goToTopButton.classList.remove('visible');
      }
    });

    // Scroll to top when clicked
    goToTopButton.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });

    // Update active link on scroll with reduced threshold for better detection
    const sections = document.querySelectorAll('section');
    const observerOptions = {
      root: null,
      rootMargin: '-80px 0px -51% 0px',
      threshold: 0.05
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const id = entry.target.id;
          // Clear all active classes
          sidebarLinks.forEach(link => link.classList.remove('active'));

          // Set only the current section's link as active
          const activeLink = document.querySelector(`.sidebar-nav a[href="#${id}"]`);
          if (activeLink) {
            activeLink.classList.add('active');
          }
        }
      });
    }, observerOptions);

    sections.forEach(section => {
      observer.observe(section);
    });

    const shouldHaveEnoughData = "Ensure you have sufficient historical data for reliable real-life projections" +
      " (such as transactions, income, expenses, assets, liabilities, and account balances). Data less than 6 " +
      "months might not be reliable.";
    const ph01 = document.querySelectorAll('.enough-data-message');
    ph01.forEach(el => {
      el.textContent = shouldHaveEnoughData;
    });

    const smallChangesCompound = "Adjust plan settings to see how small changes compound over time in the long " +
      "run, which might have a big impact on your retirement outcome.";
    const ph02 = document.querySelectorAll('.small-changes-compound-message');
    ph02.forEach(el => {
      el.textContent = smallChangesCompound;
    });
  </script>
</body>

</html>